<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chocolat Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="icon" href="images/tablette_chocolat1.ico" type="image/png" />
    <!-- Import Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
<!-- Bouton retour -->
<div class="flex pt-10 px-4 md:px-20">
    <a onclick="history.back()"
       class="inline-flex items-center group px-4 py-2 rounded-md shadow border-2 border-[#b47b52] bg-[#f7efe6] hover:bg-[#b47b52]/20 hover:border-[#b47b52] transition-colors cursor-pointer">
        <i data-lucide="arrow-left" class="mr-2 text-[#3D1F0D] group-hover:text-[#b47b52] transition-colors"></i>
        <small class="text-base group-hover:text-[#b47b52] transition-colors">Retour</small>
    </a>
</div>

<!-- Container -->
<div class="bg-white rounded-xl mx-4 md:mx-20 md:px-8 lg:px-auto my-10 relative border-2 border-[#b47b52]">
    <!-- Image principale -->
    <div class="relative flex flex-col items-center mb-[300px] md:mb-[300px] lg:mb-[500px]">
        <!-- Trombone -->
        <div class="absolute top-[-28px] md:top-[-38px] left-50 rotate-[8deg] z-30">
            <svg width="45" height="100" viewBox="0 0 39 87" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M36.7782 24.253C36.6021 21.5627 36.8276 13.9327 34.0753 9.47798C31.3272 5.03 25.6444 2.74115 19.8432 2.38622C16.3213 2.17073 6.30832 4.08828 4.06876 12.5933C2.19428 19.7118 2.72599 56.3868 3.64373 74.906C3.91109 80.2904 8.86536 84.1409 14.2124 84.1501C20.8963 84.1616 24.5204 80.137 25.2931 76.0609C25.7686 73.5525 25.4099 23.6587 25.2446 21.4832C24.9981 18.2392 23.54 15.1649 19.7003 15.0745C17.2862 15.0176 14.2784 17.1853 14.5325 22.3137C14.7199 26.0962 14.6961 53.5658 15.2153 68.0777" stroke="#7a3c18" stroke-width="4.5" stroke-linecap="round"></path>
            </svg>
        </div>
        <!-- Bloc image -->
        <div class="absolute left-1/2 -translate-x-1/2 top-[0px] md:top-[-10px] z-20 w-[80%] md:w-[400px] lg:w-[750px] h-[220px] md:h-[250px] lg:h-[450px] rounded-xl overflow-hidden rotate-[3deg] shadow-lg border-4 border-white/50">
            <img src="images/mousseAuChocolat.jpg"
                 alt="Mousse au chocolat"
                 class="w-full h-full object-cover" />
            <span class="absolute top-3 left-3 bg-white/90 text-gray-800 text-sm font-medium px-4 py-1.5 rounded-full shadow-md">Dessert</span>
            <form method="post" action="" class="absolute top-3 right-3">
                <input type="hidden" name="recette_id" value="1" />
                <button type="submit"
                        class="p-2.5 rounded-full bg-white/90 shadow-md text-gray-400 hover:text-red-500 transition-colors duration-200"
                        title="J'aime"
                >
                    <i data-lucide="heart" class="w-6 h-6"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Titre, description, auteur, infos -->
    <div class="mt-4 w-full text-[#4d2c16]">
        <h1 class="text-4xl font-pacifico text-brown-900 mb-1 text-center">Mousse au chocolat</h1>
        <p class="text-gray-600 text-base text-center italic mb-1">
            Une mousse riche et aérienne pour les amoureux du chocolat.
        </p>
        <div class="flex items-center justify-center mb-3">
            <img src="https://placehold.co/48x48/b47b52/f7efe6?text=Samuël" alt="Auteur Samuël" class="w-6 h-6 rounded-full shadow-md">
            <span class="ml-2 text-base font-medium text-[#4d2c16]">par Samuël</span>
        </div>

        <div class="flex flex-wrap justify-center gap-x-8 mb-6 text-brown-900 text-base items-center mx-2">
            <span class="flex items-center gap-x-2">
                <i data-lucide="alarm-clock" class="w-5 h-5 text-[#b47b52]"></i>
                15 min
            </span>
            <span class="flex items-center gap-x-2">
                <i data-lucide="users" class="w-5 h-5 text-[#b47b52]"></i>
                4 personnes
            </span>
            <span class="flex items-center gap-x-2">
                <i data-lucide="star" class="w-5 h-5 text-yellow-400"></i>
                4,9
            </span>
            <span class="flex items-center gap-x-2">
                <i data-lucide="heart" class="w-5 h-5 text-red-500"></i>
                32
            </span>
            <span class="bg-green-100 text-green-700 border border-green-200 text-sm px-3 py-1 rounded-lg shadow-sm">
                Facile
            </span>
        </div>
    </div>

    <!-- Ingrédients avec images -->
    <div class="mb-8 p-4">
        <h4 class="font-semibold text-xl text-[#7a3c18] mb-2 pb-2 border-b border-gray-300">Ingrédients :</h4>
        <ul class="list-none pl-4 text-lg leading-relaxed text-[#5c371d] grid grid-cols-1 md:grid-cols-3 gap-y-2">
            <li class="flex items-center mb-1">
                <img src="images/chocolat_noir.png" alt="Chocolat noir" class="w-12 h-12 mr-3">
                100g de chocolat noir à pâtisser
            </li>
            <li class="flex items-center mb-1">
                <img src="images/oeufs.png" alt="Œufs" class="w-12 h-12 mr-3">
                3 oeufs (jaunes et blancs séparés)
            </li>
            <li class="flex items-center mb-1">
                <img src="images/sucre_vanille.png" alt="Sucre vanillé" class="w-12 h-12 mr-3">
                1 sachet de sucre vanillé
            </li>
            <li class="flex items-center mb-1">
                <img src="images/beurre.webp" alt="Beurre doux" class="w-12 h-12 mr-3">
                20g de beurre doux
            </li>
            <li class="flex items-center mb-1">
                <img src="images/sucre.png" alt="Sucre en poudre" class="w-12 h-12 mr-3">
                20g de sucre en poudre
            </li>
            <li class="flex items-center mb-1">
                <img src="images/sel.png" alt="Sel fin" class="w-12 h-12 mr-3">
                1 pincée de sel fin
            </li>
            <li class="flex items-center mb-1">
                <img src="images/chocolat_poudre.png" alt="Cacao " class="w-10 h-10 mr-3">
                <img src="images/chocolat_rape.png" alt="Chocolat rapé" class="w-10 h-10 mr-3">
                <span>
                    Cacao en poudre ou chocolat râpé pour la décoration
                    <span class="ml-2 px-2 py-0.5 text-xs bg-grey-100 text-yellow-700 font-bold rounded">Optionnel</span>
                </span>
            </li>
        </ul>
    </div>


    <!-- Instructions -->
    <div class="w-full p-4 mb-8">
        <h4 class="font-semibold text-xl text-[#7a3c18] mb-2 pb-2 border-b border-gray-300">Instructions :</h4>
        <ol class="px-4 text-base leading-relaxed text-[#5c371d]">
            <li class="mb-2"><b>Étape 1</b> : Séparez délicatement les blancs des jaunes d'œufs.</li>
            <li class="mb-2"><b>Étape 2</b> : Faites fondre le chocolat noir et le beurre ensemble au bain-marie ou au micro-ondes à faible puissance. Remuez jusqu'à obtenir un mélange lisse.</li>
            <li class="mb-2"><b>Étape 3</b> : Hors du feu, incorporez les jaunes d'œufs, le sucre en poudre et le sucre vanillé au chocolat fondu. Mélangez bien.</li>
            <li class="mb-2"><b>Étape 4</b> : Dans un grand bol propre, montez les blancs d'œufs en neige très ferme avec la pincée de sel.</li>
            <li class="mb-2"><b>Étape 5</b> : Ajoutez délicatement un tiers des blancs en neige au mélange chocolaté pour "détendre" la préparation. Incorporez ensuite le reste des blancs en neige en soulevant délicatement la masse avec une spatule, pour ne pas les casser.</li>
            <li class="mb-2"><b>Étape 6</b> : Versez la mousse dans une terrine ou des verrines individuelles.</li>
            <li class="mb-2"><b>Étape 7</b> : Placez au réfrigérateur pour un minimum de 2 heures, idéalement 4 heures ou toute une nuit pour une texture parfaite.</li>
            <li class="mb-2"><b>Étape 8</b> : Avant de servir, décorez de cacao en poudre ou de chocolat râpé si désiré.</li>
            <li><b>Étape 9</b> : Dégustez cette merveilleuse mousse au chocolat !</li>
        </ol>
    </div>

    <!-- Conseils -->
    <div class="w-full p-4">
        <h4 class="font-semibold text-xl text-[#7a3c18] mb-2 pb-2 border-b border-gray-300">Conseils :</h4>
        <ul class="pl-4 text-base leading-relaxed text-[#5c371d]">
            <li class="mb-4"><b>1. Utilisez un chocolat de qualité</b><br>
                Privilégiez un chocolat noir à pâtisser contenant au moins 60% de cacao pour une mousse plus intense et onctueuse.
            </li>
            <li class="mb-4"><b>2. Des blancs bien fermes</b><br>
                Montez les blancs en neige bien fermes : c’est ce qui donnera sa légèreté à la mousse. Assurez-vous que votre bol et vos fouets sont parfaitement propres et secs.
            </li>
            <li class="mb-4"><b>3. Intégrez délicatement</b><br>
                Incorporez les blancs en neige au chocolat fondu en plusieurs fois, en soulevant la préparation de bas en haut avec une spatule pour éviter de les casser et de faire retomber la mousse.
            </li>
            <li class="mb-4"><b>4. Un temps de repos indispensable</b><br>
                Laissez prendre la mousse au minimum 3 heures au réfrigérateur, idéalement toute une nuit, pour qu’elle soit bien ferme et développe toutes ses saveurs.
            </li>
            <li class="mb-4"><b>5. Variez les plaisirs</b><br>
                Ajoutez quelques zestes d’orange, une pincée de fleur de sel ou une pointe de piment d’Espelette au mélange chocolaté pour surprendre vos invités.
            </li>
            <li class="mb-4"><b>6. Dressage</b><br>
                Servez la mousse dans de jolis ramequins ou verrines et décorez avec des copeaux de chocolat, des éclats de noisettes torréfiées ou une petite feuille de menthe pour une touche de fraîcheur.
            </li>
            <li class="mb-4"><b>7. Conservation</b><br>
                La mousse se conserve 2 à 3 jours au réfrigérateur. Couvrez-la pour éviter qu'elle n'absorbe les odeurs.
            </li>
            <li class="mb-4"><b>8. Chocolat au lait</b><br>
                Si vous utilisez du chocolat au lait, réduisez la quantité de sucre dans la recette et utilisez un stabilisateur (comme un peu de gélatine) car le chocolat au lait est moins stable.
            </li>
        </ul>
    </div>
</div>

<div class="bg-[#f7efe6] rounded-xl mx-4 md:mx-20 md:px-8 my-10 border-[1.5px] border-[#b47b52]/30 shadow-lg">
    <h4 class="font-pacifico text-2xl text-[#7a3c18] mb-6 pt-6 pb-2 border-b border-[#b47b52]/20 text-center">
        Commentaires
    </h4>
    <div class="flex flex-col md:flex-row md:gap-6 md:h-[280px] mb-5">
        <!-- Formulaire à gauche -->
        <div class="md:w-1/2 flex flex-col h-full mb-3">
            <form id="comment-form" class="bg-white/80 border border-[#b47b52]/20 rounded-lg shadow-md p-5 flex flex-col gap-4 h-full flex-1">
                <div class="flex flex-col md:flex-row gap-3">
                    <div class="flex flex-col md:w-1/2">
                        <label for="comment-author" class="mb-1 text-[#7a3c18] font-semibold text-sm">Votre prénom</label>
                        <input
                                type="text"
                                id="comment-author"
                                class="border border-[#b47b52]/20 bg-[#f7efe6] rounded py-2 px-4 font-medium focus:ring-[#b47b52] focus:outline-none w-full transition"
                                placeholder="Votre prénom…"
                                required>
                    </div>
                    <div class="flex flex-col md:w-1/2">
                        <label for="comment-sujet" class="mb-1 text-[#7a3c18] font-semibold text-sm">Sujet</label>
                        <input
                                type="text"
                                id="comment-sujet"
                                class="border border-[#b47b52]/20 bg-[#f7efe6] rounded py-2 px-4 font-medium focus:ring-[#b47b52] focus:outline-none w-full transition"
                                placeholder="Votre sujet"
                                required>
                    </div>
                </div>
                <div class="flex flex-col">
                    <label for="comment-text" class="mb-1 text-[#7a3c18] font-semibold text-sm">Commentaire</label>
                    <textarea
                            id="comment-text"
                            class="border border-[#b47b52]/20 bg-[#f7efe6] rounded px-4 py-2 focus:ring-[#b47b52] focus:outline-none"
                            rows="2"
                            placeholder="Votre commentaire…"
                            required></textarea>
                </div>
                <button
                        type="submit"
                        class="self-end mt-2 px-6 py-2 rounded bg-[#b47b52] text-white font-semibold shadow hover:bg-[#a46938] transition-colors">
                    Publier
                </button>
            </form>
        </div>
        <!-- Commentaires à droite -->
        <div class="md:w-1/2 flex flex-col h-full">
            <div id="comment-list" class="space-y-5 px-3 py-6 rounded-lg shadow-md bg-white/50 border border-[#b47b52]/20 h-full overflow-y-auto"></div>
        </div>
    </div>
</div>
<script>
    // Affichage et gestion des commentaires dans LocalStorage
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('comment-form');
        const list = document.getElementById('comment-list');
        const LS_KEY = 'mes_commentaires';

        function getComments() {
            return JSON.parse(localStorage.getItem(LS_KEY)) || [];
        }

        function saveComments(comments) {
            localStorage.setItem(LS_KEY, JSON.stringify(comments));
        }

        function renderComments() {
            const comments = getComments();
            list.innerHTML = '';
            if (comments.length === 0) {
                list.innerHTML = '<p class="text-[#b47b52] text-center italic">Aucun commentaire pour le moment. N’hésitez pas à en laisser un !</p>';
            } else {
                comments.forEach(comment => {
                    const el = document.createElement('div');
                    el.className = 'p-4 bg-[#f7efe6] border border-[#b47b52]/10 rounded shadow-sm';
                    el.innerHTML = `
                    <div class="flex items-center gap-2 mb-1">
                        <strong class="text-[#7a3c18]">${escapeHTML(comment.author)}</strong>
                        <span class="text-xs text-[#b47b52] ml-1">· ${escapeHTML(comment.sujet)}</span>
                    </div>
                    <div class="text-[#4d2c16]">${escapeHTML(comment.text)}</div>
                    <div class="text-right text-xs text-[#b47b52]/70 mt-2">${new Date(comment.date).toLocaleString()}</div>
                `;
                    list.appendChild(el);
                });
            }
        }

        // Sécurise l'affichage contre l'injection HTML
        function escapeHTML(str) {
            return str.replace(/[&<>"']/g, (m) => ({
                '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;'
            })[m]);
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const author = document.getElementById('comment-author').value.trim();
            const sujet  = document.getElementById('comment-sujet').value.trim();
            const text   = document.getElementById('comment-text').value.trim();

            if (author && sujet && text) {
                const comments = getComments();
                comments.unshift({
                    author,
                    sujet,
                    text,
                    date: new Date().toISOString()
                });
                saveComments(comments);
                renderComments();
                form.reset();
            }
        });

        renderComments();
    });
</script>
<script src="js/script.js"></script>
</body>
</html>